# Console Book Management Application

#### Консольное приложение для управления книгами. Приложение предоставляет функционал для добавления, удаления, обновления статуса и поиска книг. Данные о книгах хранятся в локальном файле в формате JSON.

## Основные возможности

* Добавление книги — позволяет добавить книгу в список.
* Удаление книги — удаляет книгу из списка по идентификатору.
* Обновление статуса книги — позволяет изменять статус книги.
* Поиск книг — позволяет искать книги по фильтрам (по названию, автору и году).
* Работа с данными — данные хранятся в JSON файле, который обновляется при изменении данных о книгах.

## Архитектура приложения

#### Приложение состоит из нескольких слоев:

* DTO (Data Transfer Objects) — используется для передачи данных между компонентами приложения.
* Сервис — отвечает за бизнес-логику и взаимодействует с репозиториями для сохранения и извлечения данных.
* Репозиторий — абстракция для работы с данными. В данном случае используется репозиторий, который сохраняет и загружает
  книги в формате JSON.
* Views и Handlers — обработчики запросов (или команд), которые управляют конвертацией ввода пользователя в DTO,
  вызывают сервисы и возвращают результат.
* Event Loop — основной цикл приложения, который обрабатывает пользовательский ввод и маршрутизирует запросы на
  соответствующие обработчики.

## Установка

1. Клонируйте репозиторий:

```git clone https://github.com/Lerokkkk/effective_mobile_test.git```

```cd effective_mobile_test```

2. Запустите приложение:

```set PYTHONPATH=src```

```python -m api.main```

## Основные файлы проекта

* api/main.py — основной файл, который запускает цикл приложения.
* repositories/ — папка с репозиториями, работающими с данными.
* services/ — папка с сервисами, содержащими логику работы с данными.
* api/schemas/ — схемы (DTO), которые используются для передачи данных.
* api/views/ — представления, которые обрабатывают пользовательский ввод и вывод.
* api/handlers/ — обработчики, которые реализуют логику взаимодействия с сервисами.
* domain/entities/ — сущности данных, такие как Book, BookFilters.

## Пример использования

1. Добавление книги

   Введите команду для добавления новой книги.  
   Приложение попросит вас ввести информацию о книге (название, автор, год).
   После ввода данных книга будет добавлена в файл и подтверждение будет выведено в консоль.

2. Удаление книги

   Введите команду для удаления книги по ID.
   Приложение удалит книгу из файла и выведет результат в консоль.

3. Поиск книг по фильтру

   Введите команду для поиска книг.
   Приложение запросит фильтры для поиска (по названию, автору, году).
   Приложение выведет список найденных книг.

4. Вывод всех книг

   Введите команду для вывода всех книг, приложение выведет список найденных книг.

5. Обновление статуса книги

   Введите команду для изменения статуса книги.
   Укажите ID книги и новый статус.
   Статус будет изменен, и изменения будут сохранены в файле.

## Структура данных
#### Приложение использует следующие основные данные:

* BookDTO — объект книги, который содержит следующие поля:
  * title — название книги
  * author — автор книги
  * year — год выпуска книги
  * status — статус книги (например, доступна или забронирована)
  * oid — уникальный идентификатор книги

Пример книги:
```
{
"title": "Мастер и Маргарита",
"author": "Михаил Булгаков",
"year": 1967,
"status": "available",
"oid": "uuid"
}
```
## Ожидаемая структура запросов:
Приложение принимает команды в виде текстового ввода, который затем обрабатывается через роутинг и представления.

Пример команд:

1 — добавить книгу

2 — удалить книгу по ID

3 — Найти книги по фильтрам

4 — Найти все книги

5 — обновить статус книги


## Ошибки и обработка исключений
Все ошибки, которые могут возникать в процессе работы с данными (например, ошибка загрузки JSON-файла или отсутствие
книги), обрабатываются на уровне репозитория и сервиса. Эти ошибки могут быть выведены в консоль через соответствующие
сообщения.
